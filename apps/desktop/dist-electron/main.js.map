{
  "version": 3,
  "sources": ["../electron/main.ts"],
  "sourcesContent": ["import { app, BrowserWindow, ipcMain, shell } from 'electron';\r\nimport path from 'node:path';\r\n\r\n// \u4E2D\u6587\u6CE8\u91CA\uFF1A\u521B\u5EFA\u5E94\u7528\u4E3B\u7A97\u53E3\uFF08\u81EA\u5B9A\u4E49\u6807\u9898\u680F\uFF0C\u6E32\u67D3\u5668\u4F7F\u7528 Vite\uFF09\r\nlet mainWindow: BrowserWindow | null = null;\r\n\r\nfunction getPlatformTag(): 'windows' | 'mac' | 'linux' {\r\n  switch (process.platform) {\r\n    case 'win32':\r\n      return 'windows';\r\n    case 'darwin':\r\n      return 'mac';\r\n    default:\r\n      return 'linux';\r\n  }\r\n}\r\n\r\nasync function createWindow() {\r\n  mainWindow = new BrowserWindow({\r\n    width: 1200,\r\n    height: 800,\r\n    minWidth: 960,\r\n    minHeight: 600,\r\n    frame: false,\r\n    titleBarStyle: process.platform === 'darwin' ? 'hiddenInset' : 'hidden',\r\n    webPreferences: {\r\n      preload: path.join(__dirname, 'preload.js'),\r\n      nodeIntegration: false,\r\n      contextIsolation: true,\r\n      sandbox: false,\r\n      spellcheck: false,\r\n    },\r\n  });\r\n\r\n  const devServerUrl = process.env.VITE_DEV_SERVER_URL;\r\n  if (devServerUrl) {\r\n    await mainWindow.loadURL(devServerUrl);\r\n    mainWindow.webContents.openDevTools({ mode: 'detach' });\r\n  } else {\r\n    const indexHtml = path.join(__dirname, 'index.html');\r\n    await mainWindow.loadFile(indexHtml);\r\n  }\r\n\r\n  // \u5B89\u5168\uFF1A\u7528\u7CFB\u7EDF\u6D4F\u89C8\u5668\u6253\u5F00\u5916\u90E8\u94FE\u63A5\r\n  mainWindow.webContents.setWindowOpenHandler(({ url }) => {\r\n    try { shell.openExternal(url); } catch { /* noop */ }\r\n    return { action: 'deny' };\r\n  });\r\n\r\n  // \u5C06\u7A97\u53E3\u5C3A\u5BF8\u53D8\u5316\u4E8B\u4EF6\u8F6C\u53D1\u7ED9\u6E32\u67D3\u5668\uFF08\u7528\u4E8E\u66F4\u65B0\u6700\u5927\u5316\u56FE\u6807\uFF09\r\n  mainWindow.on('resize', () => {\r\n    try { mainWindow?.webContents.send('window:resized'); } catch { /* noop */ }\r\n  });\r\n}\r\n\r\n// IPC\uFF1A\u7A97\u53E3\u63A7\u5236\u4E0E\u5E73\u53F0\u67E5\u8BE2\r\nipcMain.on('window:minimize', () => { try { mainWindow?.minimize(); } catch { /* noop */ } });\r\nipcMain.on('window:toggle-maximize', () => {\r\n  try {\r\n    if (!mainWindow) return;\r\n    if (mainWindow.isMaximized()) mainWindow.unmaximize();\r\n    else mainWindow.maximize();\r\n  } catch { /* noop */ }\r\n});\r\nipcMain.handle('window:is-maximized', () => {\r\n  try { return !!mainWindow?.isMaximized(); } catch { return false; }\r\n});\r\nipcMain.on('window:close', () => { try { mainWindow?.close(); } catch { /* noop */ } });\r\nipcMain.handle('get-platform', () => getPlatformTag());\r\n\r\napp.on('window-all-closed', () => {\r\n  if (process.platform !== 'darwin') app.quit();\r\n});\r\n\r\napp.whenReady().then(async () => {\r\n  await createWindow();\r\n  app.on('activate', async () => {\r\n    if (BrowserWindow.getAllWindows().length === 0) await createWindow();\r\n  });\r\n});\r\n\r\n\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sBAAmD;AACnD,uBAAiB;AAGjB,IAAI,aAAmC;AAEvC,SAAS,iBAA8C;AACrD,UAAQ,QAAQ,UAAU;AAAA,IACxB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,aAAO;AAAA,EACX;AACF;AAEA,eAAe,eAAe;AAC5B,eAAa,IAAI,8BAAc;AAAA,IAC7B,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,WAAW;AAAA,IACX,OAAO;AAAA,IACP,eAAe,QAAQ,aAAa,WAAW,gBAAgB;AAAA,IAC/D,gBAAgB;AAAA,MACd,SAAS,iBAAAA,QAAK,KAAK,WAAW,YAAY;AAAA,MAC1C,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,MAClB,SAAS;AAAA,MACT,YAAY;AAAA,IACd;AAAA,EACF,CAAC;AAED,QAAM,eAAe,QAAQ,IAAI;AACjC,MAAI,cAAc;AAChB,UAAM,WAAW,QAAQ,YAAY;AACrC,eAAW,YAAY,aAAa,EAAE,MAAM,SAAS,CAAC;AAAA,EACxD,OAAO;AACL,UAAM,YAAY,iBAAAA,QAAK,KAAK,WAAW,YAAY;AACnD,UAAM,WAAW,SAAS,SAAS;AAAA,EACrC;AAGA,aAAW,YAAY,qBAAqB,CAAC,EAAE,IAAI,MAAM;AACvD,QAAI;AAAE,4BAAM,aAAa,GAAG;AAAA,IAAG,QAAQ;AAAA,IAAa;AACpD,WAAO,EAAE,QAAQ,OAAO;AAAA,EAC1B,CAAC;AAGD,aAAW,GAAG,UAAU,MAAM;AAC5B,QAAI;AAAE,kBAAY,YAAY,KAAK,gBAAgB;AAAA,IAAG,QAAQ;AAAA,IAAa;AAAA,EAC7E,CAAC;AACH;AAGA,wBAAQ,GAAG,mBAAmB,MAAM;AAAE,MAAI;AAAE,gBAAY,SAAS;AAAA,EAAG,QAAQ;AAAA,EAAa;AAAE,CAAC;AAC5F,wBAAQ,GAAG,0BAA0B,MAAM;AACzC,MAAI;AACF,QAAI,CAAC,WAAY;AACjB,QAAI,WAAW,YAAY,EAAG,YAAW,WAAW;AAAA,QAC/C,YAAW,SAAS;AAAA,EAC3B,QAAQ;AAAA,EAAa;AACvB,CAAC;AACD,wBAAQ,OAAO,uBAAuB,MAAM;AAC1C,MAAI;AAAE,WAAO,CAAC,CAAC,YAAY,YAAY;AAAA,EAAG,QAAQ;AAAE,WAAO;AAAA,EAAO;AACpE,CAAC;AACD,wBAAQ,GAAG,gBAAgB,MAAM;AAAE,MAAI;AAAE,gBAAY,MAAM;AAAA,EAAG,QAAQ;AAAA,EAAa;AAAE,CAAC;AACtF,wBAAQ,OAAO,gBAAgB,MAAM,eAAe,CAAC;AAErD,oBAAI,GAAG,qBAAqB,MAAM;AAChC,MAAI,QAAQ,aAAa,SAAU,qBAAI,KAAK;AAC9C,CAAC;AAED,oBAAI,UAAU,EAAE,KAAK,YAAY;AAC/B,QAAM,aAAa;AACnB,sBAAI,GAAG,YAAY,YAAY;AAC7B,QAAI,8BAAc,cAAc,EAAE,WAAW,EAAG,OAAM,aAAa;AAAA,EACrE,CAAC;AACH,CAAC;",
  "names": ["path"]
}
